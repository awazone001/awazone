{% extends "admin_base.html" %}
{% load static %}
{% block title %}Dashboard | {{user.firsname}} {{user.last_name}}{% endblock %}
{% block content %}
  <nav aria-label="breadcrumb">
  <ol class="breadcrumb breadcrumb-alt bg-body-light px-4 py-2 rounded push">
    <li class="breadcrumb-item">
      <a href="">Home</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
  </ol>
</nav>
<div class="row">
  <div class="col-6 col-md-4 col-xl-2">
    <a class="block block-rounded block-bordered block-link-shadow text-center" href="{% url 'admin_dashboard' %}">
      <div class="block-content">
        <p class="my-2">
          <i class="fa fa-compass fa-2x text-muted"></i>
        </p>
        <p class="fw-semibold">Home</p>
      </div>
    </a>
  </div>
  <div class="col-6 col-md-4 col-xl-2">
    <a class="block block-rounded block-bordered block-link-shadow ribbon ribbon-modern ribbon-primary text-center" href="{% url 'rooms' %}">
      <div class="ribbon-box">{{chats.count}}</div>
      <div class="block-content">
        <p class="my-2">
          <i class="fa fa-envelope-open fa-2x text-muted"></i>
        </p>
        <p class="fw-semibold">Inbox</p>
      </div>
    </a>
  </div>
  <div class="col-6 col-md-4 col-xl-2">
    <a class="block block-rounded block-bordered block-link-shadow ribbon ribbon-modern ribbon-success text-center" href="">
      <div class="ribbon-box">3</div>
      <div class="block-content">
        <p class="my-2">
          <i class="fa fa-briefcase fa-2x text-muted"></i>
        </p>
        <p class="fw-semibold">Resources</p>
      </div>
    </a>
  </div>
  <div class="col-6 col-md-4 col-xl-2">
    <a class="block block-rounded block-bordered block-link-shadow text-center" href="">
      <div class="block-content">
        <p class="my-2">
          <i class="fa fa-chart-pie fa-2x text-muted"></i>
        </p>
        <p class="fw-semibold">Statistics</p>
      </div>
    </a>
  </div>
  <div class="col-6 col-md-4 col-xl-2">
    <a class="block block-rounded block-bordered block-link-shadow ribbon ribbon-modern ribbon-primary text-center" href="">
      <div class="ribbon-box">{{users.count}}</div>
      <div class="block-content">
        <p class="my-2">
          <i class="fa fa-user-tie fa-2x text-muted"></i>
        </p>
        <p class="fw-semibold">Users</p>
      </div>
    </a>
  </div>
  <div class="col-6 col-md-4 col-xl-2">
    <a class="block block-rounded block-bordered block-link-shadow text-center" href="">
      <div class="block-content">
        <p class="my-2">
          <i class="fa fa-file-word fa-2x text-muted"></i>
        </p>
        <p class="fw-semibold">Documents</p>
      </div>
    </a>
  </div>
</div>

<div class="row">
  <div class="col-md-6">
    <div class="block block-rounded block-bordered block-mode-loading-refresh">
      <div class="block-header">
        <h3 class="block-title">Purchases</h3>
        <div class="block-options">
          <button type="button" class="btn-block-option" data-toggle="block-option" data-action="state_toggle" data-action-mode="demo">
            <i class="fa fa-sync"></i>
          </button>
          <button type="button" class="btn-block-option">
            <i class="fa fa-wrench"></i>
          </button>
        </div>
      </div>
      <div class="block-content p-2">
        <canvas id="js-chartjs-corporate-slim-projects"></canvas>
      </div>
    </div>
  </div>
  <div class="col-md-6">
    <div class="block block-rounded block-bordered block-mode-loading-refresh">
      <div class="block-header">
        <h3 class="block-title">Sales</h3>
        <div class="block-options">
          <button type="button" class="btn-block-option" data-toggle="block-option" data-action="state_toggle" data-action-mode="demo">
            <i class="fa fa-sync"></i>
          </button>
          <button type="button" class="btn-block-option">
            <i class="fa fa-wrench"></i>
          </button>
        </div>
      </div>
      <div class="block-content p-2">
        <canvas id="js-chartjs-corporate-slim-tickets"></canvas>
      </div>
    </div>
  </div>
</div>

<div class="row items-push">
  <div class="col-xl-6">

    <div class="block block-rounded block-bordered block-mode-loading-refresh h-100 mb-0">
      <div class="block-header border-bottom">
        <h3 class="block-title">Top Buyers</h3>
        <div class="block-options">
          <button type="button" class="btn-block-option" data-toggle="block-option" data-action="state_toggle" data-action-mode="demo">
            <i class="fa fa-sync"></i>
          </button>
          <button type="button" class="btn-block-option">
            <i class="fa fa-wrench"></i>
          </button>
        </div>
      </div>
      <div class="block-content">
        <table class="table table-striped table-hover table-borderless table-vcenter fs-sm">
          <thead>
            <tr class="text-uppercase">
              <th class="fw-bold text-center" style="width: 120px;">Username</th>
              <th class="fw-bold">Email</th>
              <th class="d-none d-sm-table-cell fw-bold text-center">Level</th>
              <th class="fw-bold">amount</th>
              <th class="fw-bold text-center" style="width: 60px;">view</th>
            </tr>
          </thead>
          <tbody>
            {% for aibo in aibos %}
            <tr>
              <td class="text-center">
                <img class="img-avatar img-avatar32 img-avatar-thumb" src="{% static 'assets/media/avatars/avatar7.jpg' %}" alt="">
              </td>
              <td>
                <div class="fw-semibold fs-base">{{aibo.username}}</div>
                <div class="text-muted">{{aibo.email}}</div>
              </td>
              <td class="d-none d-sm-table-cell fs-base text-center">
                <span class="badge bg-dark">{{aibo.level}}</span>
              </td>
              <td>
                <div class="fw-semibold fs-base">{{aibo.total_deposit}}</div>
              </td>
              <td class="text-center">
                <a href="{% url 'user_profile' user.username %}" data-bs-toggle="tooltip" data-bs-placement="left" title="View User">
                  <i class="fa fa-fw fa-user-circle"></i>
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

  </div>
  <div class="col-xl-6">

    <div class="block block-rounded block-bordered block-mode-loading-refresh h-100 mb-0">
      <div class="block-header border-bottom">
        <h3 class="block-title">Top Selling Assets</h3>
        <div class="block-options">
          <button type="button" class="btn-block-option" data-toggle="block-option" data-action="state_toggle" data-action-mode="demo">
            <i class="fa fa-sync"></i>
          </button>
          <button type="button" class="btn-block-option">
            <i class="fa fa-wrench"></i>
          </button>
        </div>
      </div>
      <div class="block-content">
        <table class="table table-striped table-hover table-borderless table-vcenter fs-sm">
          <thead>
            <tr class="text-uppercase">
              <th class="fw-bold">asset</th>
              <th class="d-none d-sm-table-cell fw-bold">volume</th>
              <th class="fw-bold">sold</th>
              <th class="fw-bold">Available</th>
              <th class="fw-bold">Launched</th>
              <th class="fw-bold text-center" style="width: 60px;"></th>
            </tr>
          </thead>
          
          <tbody>
            {% for asset in assets %}
            <tr>
              <td>
                <span class="fw-semibold" style="color:green">{{asset.asset}}</span>
                <span>{{asset.sector}}</span>
              </td>
              <td class="d-none d-sm-table-cell">
                <span class="fs-sm text-muted">{{asset.total_volume}} shares</span>
              </td>
              <td>
                <span class="fw-semibold text-warning">{{asset.sold_out_volume}} shares</span>
              </td>
              <td>
                {% if asset.is_available == True %}
                <span class="fw-semibold text-success">Yes</span>
                {% else %}
                <span class="fw-semibold text-warning">No</span>
                {% endif %}
              </td>
              <td>
                <span class="fw-semibold text-success">{{asset.launch_date}}</span>
              </td>
              {% if staff.is_admin == True %}
              <td class="text-center">
                <a href="{% url 'update_asset' asset.id %}" data-bs-toggle="tooltip" data-bs-placement="left" title="Manage">
                  <i class="fa fa-wrench"></i>
                </a>
              </td>
              {% endif %}
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}